<!DOCTYPE html>
<html>

<head>
    <style>
        @font-face {
            font-family: myFirstFont;
            src: url("assets/fonts/BroadwayFlat.ttf");
        }

        body,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        .container {
            font-family: myFirstFont, sans-serif;
        }
    </style>
    <meta charset="utf-8">
    <title>Music Artist Bio JavaScript | CodingNepal</title>
    <link rel="stylesheet" href="./assets/css/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <h1 style="color: turquoise; text-shadow: 2px 2px 4px rgba(0, 0, 0, 5.0); font-size: 85px;">Music Artist Bio
    </h1>
    <p
        style="text-align: center; font-size: 24px; font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif; color: #dc143c;">
        Welcome to the platform!</p>
    <p
        style="text-align: center; font-size: 24px; font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif; color: #dc143c;">
        ------</p>
    <div class="container">
        <div class="weather-input">
            <h3 style="font-size: 150%;">Enter an Artist Name</h3>
            <input class="city-input" type="text" id="artistName"
                placeholder="E.g., Rick Ross, DJ Khaled, Denzel Curry">
            <button class="search-btn">Search</button>
        </div>
        <div class="weather-data">
            <div class="current-weather">
                <div class="details" id="artistBioContainer">


                </div>
            </div>
            <div id="embed-iframe"></div>
            <div class="days-forecast">
                <h2>Concert Info</h2>
                <ul class="weather-cards">
                    <li class="card"></li>
                    <li class="card"></li>
                    <li class="card"></li>
                    <li class="card"></li>
                    <li class="card"></li>
                </ul>
            </div>
        </div>
    </div>
    <script src="https://open.spotify.com/embed/iframe-api/v1" async></script>

    <!-- Your JavaScript code for handling Wikipedia API calls -->
    <script>
        var searchBtn = document.querySelector('.search-btn')
        var searchInput = document.querySelector("#artistName")
        searchBtn.addEventListener("click", displaySpotify)
        async function searchArtistBio() {
            var artistName = document.getElementById('artistName').value;

            const url = 'https://wikipedia-api1.p.rapidapi.com/get_page?page_name=' + encodeURIComponent(artistName) + '&lang=en';
            const options = {
                method: 'GET',
                headers: {
                    'X-RapidAPI-Key': 'fa1e0954abmsh49440351d39b2c2p1c39e1jsn077aa4a47144',
                    'X-RapidAPI-Host': 'spotify23.p.rapidapi.com'
                }
            };

            try {
                const response = await fetch(url, options);
                const result = await response.json();
                console.log(result)
                displayArtistBio(result);
                displaySpotify(result)
            } catch (error) {
                console.error(error);
            }
        }
        async function displaySpotify(result) {
            var searchInput = document.querySelector("#artistName")
            const url = 'https://spotify23.p.rapidapi.com/search/?q='+searchInput.value+'&type=multi&offset=0&limit=10&numberOfTopResults=5';
            const options = {
                method: 'GET',
                headers: {
                    'X-RapidAPI-Key': 'fa1e0954abmsh49440351d39b2c2p1c39e1jsn077aa4a47144',
                    'X-RapidAPI-Host': 'spotify23.p.rapidapi.com'
                }
            };
            try {
                const response = await fetch(url, options);
                const result = await response.json();
                console.log(result);
                const uri=result.albums.items[0].data.uri
                window.onSpotifyIframeApiReady = (IFrameAPI) => {
                    const element = document.getElementById('embed-iframe');
                    const options = {
                        uri: uri
                    };
                    const callback = (EmbedController) => { };
                    IFrameAPI.createController(element, options, callback);
                }
            } catch (error) {
                console.error(error);
            }
            // var artistName=result 


        }
        function displayArtistBio(bio) {
            var artistBioContainer = document.getElementById('artistBioContainer');
            artistBioContainer.innerHTML = bio;
        }
    </script>
</body>

</html>